{% extends 'base.html' %}
{% load static %}
{% block title %}添加设备{% endblock %}
{% block custome_css %}
    <link rel="stylesheet" href="{% static 'devices/css/device-add.css' %}">
{% endblock %}
{% block content %}
    <div class="content">
        <p class="content-note1">添加设备<span class="content-note2"> (标注为*为必填项)</span></p>
        <div style="clear:both"></div>
        <form class="form-table" action="{% url 'devices:device_add' %}" method="post">
            <div class="form-list">
                <span>*设备类型</span>
                <select {% if device_form.errors.device_type %}class="input-error"{% endif %} name="device_type">
                    <option style="display: none;" disabled selected>请选择</option>
                    {% for device_type in device_types %}
                        <option value="{{ device_type.id }}">{{ device_type.device_type }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-list">
                <span>资产编号</span><input {% if device_form.errors.device_id %}class="input-error"{% endif %} type="text" name="device_id" placeholder="不超过100个字符"/>
            </div>
            <div class="form-list">
                <span>mac地址</span><input {% if device_form.errors.device_mac %}class="input-error"{% endif %} type="text" name="device_mac" placeholder="不超过50个字符"/>
            </div>
            <div class="form-list">
                <span>是否root</span><input {% if device_form.errors.device_root %}class="input-error"{% endif %} type="text" name="device_root" placeholder="不超过50个字符"/>
            </div>
            <div class="form-list">
                <span>设备状态</span><input {% if device_form.errors.device_status %}class="input-error"{% endif %} type="text" name="device_status" placeholder="不超过50个字符"/>
            </div>
             <div class="form-list">
                <span>*使用人</span>
                <select {% if device_form.errors.device_user %}class="input-error"{% endif %} name="device_user">
                    <option style="display: none;" disabled selected>请选择</option>
                    <option value="0">无</option>
                    {% for user in users %}
                        <option value="{{ user.id }}">{{ user.username }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-list">
                <span class="comment">备注</span><textarea class="textarea {% if device_form.errors.comment %}input-error{% endif %}" name="comment" placeholder="不超过300个字符"></textarea>
            </div>
            {% if msg %}
                <div class="error">{{ msg }}</div>
            {% endif %}
            <div style="clear:both"></div>
            <div class="form-list">
                <input class="form-button" type="submit"/>
            </div>
            <div class="form-list">
                 <button class="form-button" type="button" onclick="btn_cancel()">取消</button>
            </div>
            {% csrf_token %}
        </form>
    </div>
{% endblock %}
{% block custome_js %}
    <script>
        function btn_cancel() {
            location.href = "{% url 'devices:device_list' %}";
        }
    </script>
{% endblock %}